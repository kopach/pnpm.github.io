"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3291],{9613:(e,n,a)=>{a.d(n,{Zo:()=>s,kt:()=>m});var i=a(9496);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,i,t=function(e,n){if(null==e)return{};var a,i,t={},o=Object.keys(e);for(i=0;i<o.length;i++)a=o[i],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var p=i.createContext({}),c=function(e){var n=i.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):r(r({},n),e)),a},s=function(e){var n=c(e.components);return i.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var a=e.components,t=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(a),m=t,g=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return a?i.createElement(g,r(r({ref:n},s),{},{components:a})):i.createElement(g,r({ref:n},s))}));function m(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var o=a.length,r=new Array(o);r[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:t,r[1]=l;for(var c=2;c<o;c++)r[c]=a[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8544:(e,n,a)=>{a.r(n),a.d(n,{frontMatter:()=>l,contentTitle:()=>p,metadata:()=>c,assets:()=>s,toc:()=>u,default:()=>m});var i=a(98),t=a(6862),o=(a(9496),a(9613)),r=["components"],l={title:"Opzioni di configurazione di Node-Modules con pnpm",author:"Zoltan Kochan",authorURL:"http://twitter.com/zoltankochan",authorImageURL:"https://pbs.twimg.com/profile_images/1143606083262586880/EW2GCFKK_400x400.jpg"},p=void 0,c={permalink:"/it/blog/2020/10/17/node-modules-configuration-options-with-pnpm",editUrl:"https://crowdin.com/project/pnpm/it",source:"@site/i18n/it/docusaurus-plugin-content-blog/2020-10-17-node-modules-configuration-options-with-pnpm.md",title:"Opzioni di configurazione di Node-Modules con pnpm",description:"Esistono molti modi per creare una cartella nodemodules. Il tuo obiettivo deve essere quello di creare la pi\xf9 rigorosa, ma se ci\xf2 non \xe8 possibile, ci sono anche opzioni per creare una cartella nodemodules sciolta.",date:"2020-10-17T00:00:00.000Z",formattedDate:"17 ottobre 2020",tags:[],readingTime:1.855,truncated:!0,authors:[{name:"Zoltan Kochan",url:"http://twitter.com/zoltankochan",imageURL:"https://pbs.twimg.com/profile_images/1143606083262586880/EW2GCFKK_400x400.jpg"}],nextItem:{title:"La node_modules flat non \xe8 l'unico modo",permalink:"/it/blog/2020/05/27/flat-node-modules-is-not-the-only-way"}},s={authorsImageUrls:[void 0]},u=[{value:"Configurazione predefinita",id:"configurazione-predefinita",children:[],level:2},{value:"Plug&#39;n&#39;Play. La configurazione pi\xf9 rigorosa",id:"plugnplay-la-configurazione-pi\xf9-rigorosa",children:[],level:2},{value:"Una cartella di moduli rigorosa e tradizionale",id:"una-cartella-di-moduli-rigorosa-e-tradizionale",children:[],level:2},{value:"Il caso peggiore - installazione alla radice",id:"il-caso-peggiore---installazione-alla-radice",children:[],level:2}],d={toc:u};function m(e){var n=e.components,a=(0,t.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Esistono molti modi per creare una cartella node_modules. Il tuo obiettivo deve essere quello di creare la pi\xf9 rigorosa, ma se ci\xf2 non \xe8 possibile, ci sono anche opzioni per creare una cartella node_modules sciolta."),(0,o.kt)("h2",{id:"configurazione-predefinita"},"Configurazione predefinita"),(0,o.kt)("p",null,"Per impostazione predefinita, pnpm v5 crea una cartella node_modules semi-rigorosa. Semi-rigorosa significa che la tua applicazione sar\xe0 in grado di utilizzare solo i pacchetti che sono stati aggiunti come dipendenze in ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json")," (con alcune eccezioni). Tuttavia, le tue dipendenze saranno in grado di accedere a qualsiasi pacchetto."),(0,o.kt)("p",null,"La configurazione predefinita \xe8 simile a questa:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"; Tutti i pacchetti vengono installati in node_modules/.pnpm/node_modules\nhoist-pattern[]=*\n\n; Tutti i tipi vengono installati alla radice per rendere felice TypeScript\npublic-hoist-pattern[]=*types*\n\n; Tutti i pacchetti relativi a ESLint vengono installati alla radice anch'essi\npublic-hoist-pattern[]=*eslint*\n")),(0,o.kt)("h2",{id:"plugnplay-la-configurazione-pi\xf9-rigorosa"},"Plug'n'Play. La configurazione pi\xf9 rigorosa"),(0,o.kt)("p",null,"pnpm supporta il ",(0,o.kt)("a",{parentName:"p",href:"https://yarnpkg.com/features/pnp"},"Plug'n'Play di Yarn")," dalla versione v5.9. Con PnP, sia la tua applicazione che le dipendenze della tua applicazione avranno accesso solo alle loro dipendenze dichiarate. Questo \xe8 ancora pi\xf9 rigoroso dell'impostazione ",(0,o.kt)("inlineCode",{parentName:"p"},"hoist=false")," perch\xe9 all'interno di un monorepo, la tua applicazione non sar\xe0 in grado di accedere nemmeno alle dipendenze del progetto root."),(0,o.kt)("p",null,"Per utilizzare Plug'n'Play, imposta queste impostazioni:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"node-linker=pnp\nsymlink=false\n")),(0,o.kt)("h2",{id:"una-cartella-di-moduli-rigorosa-e-tradizionale"},"Una cartella di moduli rigorosa e tradizionale"),(0,o.kt)("p",null,"Se non sei ancora pronto per utilizzare PnP, puoi comunque essere rigoroso e consentire solo ai pacchetti di accedere alle proprie dipendenze impostando la configurazione dell'hoist su false:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"hoist=false\n")),(0,o.kt)("p",null,"Tuttavia, se alcune delle tue dipendenze stanno tentando di accedere a pacchetti che non hanno nelle dipendenze, hai due opzioni:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Crea un ",(0,o.kt)("inlineCode",{parentName:"p"},"pnpmfile.js")," e usa un ",(0,o.kt)("a",{parentName:"p",href:"/pnpmfile"},"hook")," per aggiungere la dipendenza mancante al manifest del pacchetto.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Aggiungi un modello all'impostazione ",(0,o.kt)("inlineCode",{parentName:"p"},"hoist-pattern"),". Ad esempio, se il modulo non trovato \xe8 ",(0,o.kt)("inlineCode",{parentName:"p"},"babel-core"),", aggiungi la seguente impostazione a ",(0,o.kt)("inlineCode",{parentName:"p"},".npmrc"),":"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"hoist-pattern[]=babel-core\n")))),(0,o.kt)("h2",{id:"il-caso-peggiore---installazione-alla-radice"},"Il caso peggiore - installazione alla radice"),(0,o.kt)("p",null,"Alcuni strumenti potrebbero non funzionare anche con la configurazione predefinita di pnpm, che installa tutto alla radice dell'archivio virtuale e alcuni pacchetti alla radice. In questo caso, puoi installare tutto o un sottoinsieme di dipendenze alla radice della cartella dei moduli."),(0,o.kt)("p",null,"Installa tutto alla radice di node_modules:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"shamefully-hoist=true\n")),(0,o.kt)("p",null,"Installa solo i pacchetti che corrispondono a un modello:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"public-hoist-pattern[]=babel-*\n")))}m.isMDXComponent=!0}}]);